<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.5.0/aframe/build/aframe-ar.js"></script>
    <title>ARTest</title>
  </head>
  <body>
    <button onclick="permission_request();">動作と方向へのアクセス許可</button>
    <a href="./01.html">01 | オブジェクトの表示</a>
    <a href="./02.html">02 | スナップショット</a>
  </body>
</html>

<script>
  function post_function( result_string ) {
    if ( result_string === "granted" ) {
      // ユーザが許可した場合、文字列"granted"が返る
    } else if ( result_string === "denied" ) {
      // ユーザが拒否した場合、文字列"denied"が返る
    }
  }
  
  function permission_request() {
    if ( DeviceOrientationEvent
          && DeviceOrientationEvent.requestPermission
          && typeof DeviceOrientationEvent.requestPermission === 'function') {
      DeviceMotionEvent.requestPermission().then( post_function );
      window.addEventListener( "devicemotion", function(e) {
        // 何らかの処理
      }, false );
    }
    if ( DeviceOrientationEvent
          && DeviceOrientationEvent.requestPermission
          && typeof DeviceOrientationEvent.requestPermission === 'function') {
          DeviceOrientationEvent.requestPermission().then( postf_unction );
      window.addEventListener( "deviceorientation", function(e) {
      // 何らかの処理
      }, false );
    }
  }
</script>
